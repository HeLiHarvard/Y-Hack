// Generated by CoffeeScript 1.6.1
(function() {
  var visible;

  window.displayed = [];

  $(document).ready(function() {
    return chrome.history.search({text: ''}, function(results) {
      return chrome.tabs.query({}, function(tabs) {
        var index, tab, _i, _len, _results;
        _results = [];
        for (_i = 0, _len = tabs.length; _i < _len; _i++) {
          tab = tabs[_i];
          index = results.indexOf(tab.id);
          if (index === -1) {
            _results.push(console.log("FAILURE"));
          } else {
            window.display(results[index], tabs.id);
            _results.push(chrome.history.getVisits({
              'url': result.url
            }, function(visits) {
              return window.display(result, item.id, item.referringVisitId);
            }));
          }
        }
        return _results;
      });
    });
  });

  visible = function(id) {
    return window.displayed.indexOf(id) !== -1;
  };

  /*
  
  	HistoryItem
  
  	id ( string )
  		The unique identifier for the item.
  	url ( optional string )
  		The URL navigated to by a user.
  	title ( optional string )
  		The title of the page when it was last loaded.
  	lastVisitTime ( optional double )
  		When this page was last loaded, represented in milliseconds since the epoch.
  	visitCount ( optional integer )
  		The number of times the user has navigated to this page.
  	typedCount ( optional integer )
  		The number of times the user has navigated to this page by typing in the address.
  
  	VisitItem
  
  	id ( string )
  		The unique identifier for the item.
  	visitId ( string )
  		The unique identifier for this visit.
  	visitTime ( optional double )
  		When this visit occurred, represented in milliseconds since the epoch.
  	referringVisitId ( string )
  		The visit ID of the referrer.
  */


}).call(this);
